<div class="dashboard-wrapper">
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="dashboard-sidebar">
      <div class="user-info">
        <img [src]="userProfile.avatar" alt="Avatar" class="user-avatar">
        <h3>{{ userProfile.name }}</h3>
        <p class="user-email">{{ userProfile.email }}</p>
        <span class="member-badge">Membre depuis {{ userProfile.memberSince }}</span>
      </div>

      <nav class="dashboard-nav">
        <button 
          (click)="setActiveTab('courses')" 
          [class.active]="activeTab === 'courses'"
          class="nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
          </svg>
          Mes Cours
        </button>

        <button 
          (click)="setActiveTab('favorites')" 
          [class.active]="activeTab === 'favorites'"
          class="nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
          Favoris
        </button>

        <button 
          (click)="setActiveTab('certificates')" 
          [class.active]="activeTab === 'certificates'"
          class="nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="10" r="3"></circle>
            <path d="M12 2a10 10 0 0 0-9.95 9h4.53a9.93 9.93 0 0 1 5.42-5.42V2z"></path>
            <path d="M12 22a10 10 0 0 0 9.95-9h-4.53a9.93 9.93 0 0 1-5.42 5.42V22z"></path>
          </svg>
          Certifications
        </button>

        <button 
          (click)="setActiveTab('profile')" 
          [class.active]="activeTab === 'profile'"
          class="nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          Profil
        </button>
      </nav>

      <div class="dashboard-stats">
        <div class="stat-item">
          <span class="stat-number">{{ userProfile.completedCourses }}</span>
          <span class="stat-label">Cours complétés</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ userProfile.certificatesEarned }}</span>
          <span class="stat-label">Certificats</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ userProfile.totalHours }}h</span>
          <span class="stat-label">Temps d'étude</span>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="dashboard-main">
      <!-- My Courses Tab -->
      @if (activeTab === 'courses') {
        <div class="content-section">
          <div class="section-header">
            <h2>Mes Cours en Cours</h2>
            <a routerLink="/formations" class="btn btn-primary">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              Parcourir les cours
            </a>
          </div>

          <div class="courses-grid">
            @for (course of myCourses; track course.id) {
              <div class="course-card">
                <div class="course-image" [style.background-image]="'url(' + course.image + ')'">
                  <span class="course-category">{{ course.category }}</span>
                </div>
                <div class="course-content">
                  <h3>{{ course.title }}</h3>
                  <div class="course-progress">
                    <div class="progress-info">
                      <span>Progression</span>
                      <span class="progress-percent">{{ course.progress }}%</span>
                    </div>
                    <div class="progress-bar">
                      <div class="progress-fill" [style.width.%]="course.progress"></div>
                    </div>
                    <p class="lessons-count">{{ course.completedLessons }}/{{ course.totalLessons }} leçons complétées</p>
                  </div>
                  @if (course.lastAccessed) {
                    <p class="last-accessed">Dernier accès: {{ course.lastAccessed }}</p>
                  }
                  <button (click)="continueCourse(course.id)" class="btn btn-outline btn-block">
                    Continuer le cours
                  </button>
                </div>
              </div>
            }
          </div>
        </div>
      }

      <!-- Favorites Tab -->
      @if (activeTab === 'favorites') {
        <div class="content-section">
          <div class="section-header">
            <h2>Mes Favoris</h2>
            <p>Cours que vous avez marqués comme favoris</p>
          </div>

          @if (favoriteCourses.length === 0) {
            <div class="empty-state">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
              <h3>Aucun cours favori</h3>
              <p>Ajoutez des cours à vos favoris pour les retrouver facilement</p>
              <a routerLink="/formations" class="btn btn-primary">Explorer les cours</a>
            </div>
          } @else {
            <div class="favorites-list">
              @for (course of favoriteCourses; track course.id) {
                <div class="favorite-item">
                  <img [src]="course.image" [alt]="course.title">
                  <div class="favorite-info">
                    <span class="favorite-category">{{ course.category }}</span>
                    <h3>{{ course.title }}</h3>
                    <div class="favorite-meta">
                      <span>{{ course.totalLessons }} leçons</span>
                      @if (course.progress > 0) {
                        <span>{{ course.progress }}% complété</span>
                      }
                    </div>
                  </div>
                  <div class="favorite-actions">
                    <button (click)="continueCourse(course.id)" class="btn btn-primary">Accéder</button>
                    <button (click)="removeFavorite(course.id)" class="btn-icon" title="Retirer des favoris">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                      </svg>
                    </button>
                  </div>
                </div>
              }
            </div>
          }
        </div>
      }

      <!-- Certificates Tab -->
      @if (activeTab === 'certificates') {
        <div class="content-section">
          <div class="section-header">
            <h2>Mes Certifications</h2>
            <p>Certificats obtenus et en cours</p>
          </div>

          <div class="certificates-grid">
            @for (cert of certificates; track cert.id) {
              <div class="certificate-card" [class.in-progress]="cert.status === 'in-progress'">
                <div class="certificate-icon">
                  @if (cert.status === 'completed') {
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                      <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                  } @else {
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                  }
                </div>
                <div class="certificate-info">
                  <h3>{{ cert.courseName }}</h3>
                  <p class="certificate-id">{{ cert.certificateId }}</p>
                  @if (cert.issueDate) {
                    <p class="certificate-date">Délivré le {{ cert.issueDate }}</p>
                  }
                  @if (cert.status === 'completed') {
                    <span class="status-badge completed">Complété</span>
                  } @else {
                    <span class="status-badge in-progress">En cours</span>
                  }
                </div>
                @if (cert.status === 'completed') {
                  <button (click)="downloadCertificate(cert)" class="btn btn-outline">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                      <polyline points="7 10 12 15 17 10"></polyline>
                      <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    Télécharger
                  </button>
                }
              </div>
            }
          </div>
        </div>
      }

      <!-- Profile Tab -->
      @if (activeTab === 'profile') {
        <div class="content-section">
          <div class="section-header">
            <h2>Mon Profil</h2>
            <button class="btn btn-outline">Modifier</button>
          </div>

          <div class="profile-content">
            <div class="profile-section">
              <h3>Informations Personnelles</h3>
              <div class="info-grid">
                <div class="info-item">
                  <label>Nom complet</label>
                  <p>{{ userProfile.name }}</p>
                </div>
                <div class="info-item">
                  <label>Email</label>
                  <p>{{ userProfile.email }}</p>
                </div>
                <div class="info-item">
                  <label>Membre depuis</label>
                  <p>{{ userProfile.memberSince }}</p>
                </div>
                <div class="info-item">
                  <label>Statut</label>
                  <p><span class="status-badge active">Actif</span></p>
                </div>
              </div>
            </div>

            <div class="profile-section">
              <h3>Statistiques d'Apprentissage</h3>
              <div class="stats-grid">
                <div class="stat-card">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                  </svg>
                  <div>
                    <h4>{{ userProfile.completedCourses }}</h4>
                    <p>Cours terminés</p>
                  </div>
                </div>
                <div class="stat-card">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="10" r="3"></circle>
                    <path d="M12 2a10 10 0 0 0-9.95 9h4.53a9.93 9.93 0 0 1 5.42-5.42V2z"></path>
                  </svg>
                  <div>
                    <h4>{{ userProfile.certificatesEarned }}</h4>
                    <p>Certificats obtenus</p>
                  </div>
                </div>
                <div class="stat-card">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                  </svg>
                  <div>
                    <h4>{{ userProfile.totalHours }}h</h4>
                    <p>Temps d'étude total</p>
                  </div>
                </div>
                <div class="stat-card">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                  </svg>
                  <div>
                    <h4>{{ myCourses.length }}</h4>
                    <p>Cours actifs</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="profile-section">
              <h3>Préférences</h3>
              <div class="preferences-list">
                <div class="preference-item">
                  <div>
                    <strong>Notifications par email</strong>
                    <p>Recevoir des mises à jour sur les nouveaux cours</p>
                  </div>
                  <label class="switch">
                    <input type="checkbox" checked>
                    <span class="slider"></span>
                  </label>
                </div>
                <div class="preference-item">
                  <div>
                    <strong>Rappels de cours</strong>
                    <p>Recevoir des rappels pour continuer vos cours</p>
                  </div>
                  <label class="switch">
                    <input type="checkbox" checked>
                    <span class="slider"></span>
                  </label>
                </div>
                <div class="preference-item">
                  <div>
                    <strong>Profil public</strong>
                    <p>Permettre aux autres utilisateurs de voir votre profil</p>
                  </div>
                  <label class="switch">
                    <input type="checkbox">
                    <span class="slider"></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      }
    </main>
  </div>
</div>
