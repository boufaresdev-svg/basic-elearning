<div class="dashboard-container">
  <!-- Enhanced Sidebar Navigation -->
  <aside class="modern-sidebar">
    <div class="sidebar-brand">
      <div class="brand-logo">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
        </div>
        <div class="brand-text">
          <h1>SMS2I</h1>
          <span>Admin Hub</span>
        </div>
      </div>
      <button class="sidebar-toggle" (click)="toggleSidebar()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>

    <nav class="nav-menu">
      <div class="nav-section">
        <span class="nav-label">DASHBOARD</span>
        <button
          [class.active]="activeTab === 'user'"
          (click)="activeTab = 'user'"
          class="nav-item">
          <div class="nav-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
          <span class="nav-text">Mes Formations</span>
          <div class="nav-indicator"></div>
        </button>

        <button
          [class.active]="activeTab === 'courses'"
          (click)="activeTab = 'courses'"
          class="nav-item">
          <div class="nav-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
            </svg>
          </div>
          <span class="nav-text">Biblioth√®que</span>
          <div class="nav-indicator"></div>
        </button>
      </div>

      <div class="nav-section">
        <span class="nav-label">CR√âATION</span>
        <button
          [class.active]="activeTab === 'create'"
          (click)="activeTab = 'create'"
          class="nav-item">
          <div class="nav-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="16"></line>
              <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
          </div>
          <span class="nav-text">Nouveau Cours</span>
          <div class="nav-indicator"></div>
        </button>

        <button
          [class.active]="activeTab === 'manage'"
          (click)="activeTab = 'manage'"
          class="nav-item">
          <div class="nav-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
            </svg>
          </div>
          <span class="nav-text">√âditeur</span>
          <div class="nav-indicator"></div>
        </button>
      </div>
    </nav>

    <div class="sidebar-actions">
      <div class="user-profile">
        <div class="profile-avatar">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
        </div>
        <div class="profile-info">
          <span class="profile-name">Admin</span>
          <span class="profile-role">Super User</span>
        </div>
      </div>
      <button class="logout-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16,17 21,12 16,7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        D√©connexion
      </button>
    </div>
  </aside>

  <!-- Modern Main Content -->
  <main class="dashboard-main">
    <div class="content-header">
      <div class="header-info">
        <h1 class="page-title">
          @if (activeTab === 'user') { Mes Formations }
          @if (activeTab === 'courses') { Biblioth√®que de Cours }
          @if (activeTab === 'create') { Cr√©er un Cours }
          @if (activeTab === 'manage') { √âditeur de Contenu }
        </h1>
        <p class="page-subtitle">
          @if (activeTab === 'user') { D√©couvrez vos formations personnalis√©es }
          @if (activeTab === 'courses') { G√©rez votre collection de cours }
          @if (activeTab === 'create') { Concevez de nouvelles exp√©riences d'apprentissage }
          @if (activeTab === 'manage') { Enrichissez vos cours avec du contenu multim√©dia }
        </p>
      </div>
      <div class="header-actions">
        <button class="action-btn secondary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          Rechercher
        </button>
        <button class="action-btn primary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Nouveau
        </button>
      </div>
    </div>

    <!-- Tab: Mes Formations (User Section) -->
    @if (activeTab === 'user') {
      <div class="content-body">
        <div class="insights-grid">
          <div class="insight-card progress">
            <div class="insight-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
            </div>
            <div class="insight-data">
              <h3>3</h3>
              <p>Formations Compl√©t√©es</p>
            </div>
          </div>

          <div class="insight-card active">
            <div class="insight-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <circle cx="12" cy="12" r="10"/>
                <polygon points="10,8 16,12 10,16 10,8"/>
              </svg>
            </div>
            <div class="insight-data">
              <h3>2</h3>
              <p>En Cours</p>
            </div>
          </div>

          <div class="insight-card pending">
            <div class="insight-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
              </svg>
            </div>
            <div class="insight-data">
              <h3>1</h3>
              <p>Disponibles</p>
            </div>
          </div>
        </div>

        <!-- Smart Filter System -->
        <div class="filter-panel">
          <div class="filter-header">
            <h3>Filtres Intelligents</h3>
            <button class="filter-reset">R√©initialiser</button>
          </div>
          <div class="filter-chips">
            <button
              (click)="userCategoryFilter = 'all'"
              [class.active]="userCategoryFilter === 'all'"
              class="filter-chip all">
              <span class="chip-icon">üéØ</span>
              <span>Toutes</span>
              <span class="chip-count">{{ courses.length }}</span>
            </button>
            @for (category of categoryOptions; track category.value) {
              <button
                (click)="changeUserFilter(category.value)"
                [class.active]="userCategoryFilter === category.value"
                [class]="'filter-chip ' + category.value">
                <span class="chip-icon">
                  @if (category.value === 'thermo') { üî• }
                  @if (category.value === 'automatisme') { ‚öôÔ∏è }
                  @if (category.value === 'process') { üîÑ }
                </span>
                <span>{{ category.label }}</span>
                <span class="chip-count">{{ getCoursesByCategory(category.value).length }}</span>
              </button>
            }
          </div>
        </div>

        <!-- Modern Formations Grid -->
        @if (getFilteredCoursesForUser().length > 0) {
          <div class="modern-grid">
            @for (course of getFilteredCoursesForUser(); track course.id) {
              <article class="course-card" [class]="'category-' + course.category">
                <div class="card-media">
                  <div class="media-overlay">
                    @if (course.accessKey) {
                      <div class="access-badge unlocked">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                        </svg>
                        <span>D√©bloqu√©</span>
                      </div>
                    } @else {
                      <div class="access-badge locked">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                        </svg>
                        <span>Verrouill√©</span>
                      </div>
                    }
                  </div>
                  <div class="course-category">
                    <span class="category-tag" [class]="course.category">
                      @if (course.category === 'thermo') { Thermodynamique }
                      @if (course.category === 'automatisme') { Automatisme }
                      @if (course.category === 'process') { Processus }
                    </span>
                  </div>
                </div>

                <div class="card-content">
                  <header class="course-header">
                    <h3 class="course-title">{{ course.title }}</h3>
                    <p class="course-description">{{ course.description }}</p>
                  </header>

                  @if (course.contents.length > 0) {
                    <div class="course-modules">
                      <div class="modules-header">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                          <line x1="9" y1="9" x2="15" y2="9"></line>
                          <line x1="9" y1="15" x2="15" y2="15"></line>
                        </svg>
                        <span>{{ course.contents.length }} modules</span>
                      </div>
                      <div class="modules-preview">
                        @for (content of course.contents.slice(0, 3); track content.id) {
                          <div class="module-chip">
                            <span class="module-name">{{ content.title }}</span>
                            @if (content.duration) {
                              <span class="module-time">{{ content.duration }}</span>
                            }
                          </div>
                        }
                        @if (course.contents.length > 3) {
                          <div class="module-chip more">
                            +{{ course.contents.length - 3 }} autres
                          </div>
                        }
                      </div>
                    </div>
                  }
                </div>

                <footer class="card-actions">
                  @if (course.accessKey) {
                    <button class="action-button primary">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <polygon points="5,3 19,12 5,21 5,3"></polygon>
                      </svg>
                      Commencer
                    </button>
                  } @else {
                    <button class="action-button disabled" disabled>
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect>
                        <circle cx="12" cy="16" r="1"></circle>
                        <path d="m7 11V7a5 5 0 0 1 10 0v4"></path>
                      </svg>
                      Acc√®s Requis
                    </button>
                  }
                  <button class="action-button secondary">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <circle cx="12" cy="12" r="10"></circle>
                      <path d="M9,11 l3,3 l3,-3"></path>
                    </svg>
                    D√©tails
                  </button>
                </footer>
              </article>
            }
          </div>
        } @else {
          <div class="empty-state modern">
            <div class="empty-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </div>
            <h2>Aucune formation disponible</h2>
            <p>Explorez d'autres cat√©gories ou contactez votre administrateur</p>
            <button class="empty-action">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7,10 12,15 17,10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              Demander l'acc√®s
            </button>
          </div>
        }
      </div>
    }

    <!-- Other tabs would go here with similar modern styling -->
    @if (activeTab === 'courses') {
      <div class="tab-content">
        <div class="content-header">
          <h1>Biblioth√®que de Cours</h1>
          <p>G√©rez et organisez tous vos cours de formation</p>
        </div>

        @if (courses.length > 0) {
          <!-- Improved Search and Filter Controls -->
          <div class="bibliotheque-controls card">
            <div class="search-sort-bar">
              <div class="search-container">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="search-icon">
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input
                  type="text"
                  [(ngModel)]="bibliothequeSearchTerm"
                  placeholder="Rechercher par titre ou description..."
                  class="search-input"
                />
              </div>

              <div class="sort-container">
                <label for="sort-select">Trier par:</label>
                <select
                  id="sort-select"
                  [(ngModel)]="bibliothequeSort"
                  class="sort-select"
                >
                  <option value="date">Date (Plus r√©cent)</option>
                  <option value="title">Titre (A-Z)</option>
                  <option value="category">Cat√©gorie</option>
                  <option value="access">Statut d'acc√®s</option>
                </select>
              </div>
            </div>

            <!-- Bulk Actions Bar -->
            @if (selectedCourseIds.size > 0) {
              <div class="bulk-actions-bar">
                <span class="selection-count">{{ selectedCourseIds.size }} cours s√©lectionn√©(s)</span>
                <div class="bulk-action-buttons">
                  <button
                    (click)="generateAccessKeysForSelected()"
                    class="btn btn-info btn-small">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <rect x="3" y="11" width="18" height="10" rx="2" ry="2"></rect>
                      <path d="M7 11V7a5 5 0 0110 0v4"></path>
                    </svg>
                    G√©n√©rer Cl√©s ({{ selectedCourseIds.size }})
                  </button>
                  <button
                    (click)="exportCoursesAsJson()"
                    class="btn btn-secondary btn-small">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                      <polyline points="7,10 12,15 17,10"></polyline>
                      <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    Exporter
                  </button>
                  <button
                    (click)="deleteSelectedCourses()"
                    class="btn btn-danger btn-small">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <polyline points="3 6 5 6 21 6"></polyline>
                      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                    Supprimer
                  </button>
                </div>
              </div>
            }
          </div>

          <!-- Improved Courses List View -->
          <div class="courses-overview improved">
            @if (searchCourses(bibliothequeSearchTerm).length > 0) {
              @for (course of searchCourses(bibliothequeSearchTerm); track course.id) {
                <div class="course-item-enhanced card">
                  <!-- Checkbox for bulk selection -->
                  <div class="course-checkbox">
                    <input
                      type="checkbox"
                      [checked]="selectedCourseIds.has(course.id)"
                      (change)="toggleCourseSelection(course.id)"
                      class="checkbox"
                    />
                  </div>

                  <div class="course-main-info">
                    <div class="course-header-enhanced">
                      <h3>{{ course.title }}</h3>
                      <div class="course-meta-tags">
                        <span class="category-tag" [class]="course.category">
                          {{ getCategoryLabel(course.category) }}
                        </span>
                        <span [class]="'access-badge ' + getAccessKeyClass(course)">
                          @if (course.accessKey) {
                            <svg viewBox="0 0 24 24" fill="currentColor">
                              <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                            </svg>
                            D√©bloqu√©
                          } @else {
                            <svg viewBox="0 0 24 24" fill="currentColor">
                              <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                            </svg>
                            Verrouill√©
                          }
                        </span>
                      </div>
                    </div>
                    <p class="course-description">{{ course.description }}</p>

                    <!-- Course Statistics -->
                    <div class="course-stats">
                      <div class="stat-item">
                        <span class="stat-icon">üìö</span>
                        <span>{{ getCourseStats(course).modules }} modules</span>
                      </div>
                      <div class="stat-item">
                        <span class="stat-icon">‚è±Ô∏è</span>
                        <span>{{ getCourseStats(course).totalDuration }}</span>
                      </div>
                      <div class="stat-item">
                        <span class="stat-icon">üìÖ</span>
                        <span>{{ course.updatedAt ? (course.updatedAt | date:'short') : (course.createdAt | date:'short') }}</span>
                      </div>
                    </div>
                  </div>

                  <!-- Course Actions -->
                  <div class="course-actions-enhanced">
                    <button
                      (click)="previewCourseDetails(course)"
                      class="action-icon-btn"
                      title="Aper√ßu">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                    </button>
                    <button
                      (click)="selectCourse(course)"
                      class="action-icon-btn"
                      title="Modifier">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                      </svg>
                    </button>
                    <button
                      (click)="duplicateCourse(course)"
                      class="action-icon-btn"
                      title="Dupliquer">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                      </svg>
                    </button>
                    @if (!course.accessKey) {
                      <button
                        (click)="generateAccessKey(course)"
                        class="action-icon-btn generate"
                        title="G√©n√©rer cl√©">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                          <circle cx="12" cy="12" r="10"></circle>
                          <line x1="12" y1="8" x2="12" y2="16"></line>
                          <line x1="8" y1="12" x2="16" y2="12"></line>
                        </svg>
                      </button>
                    } @else {
                      <button
                        (click)="copyToClipboard(course.accessKey)"
                        class="action-icon-btn copy"
                        title="Copier cl√©">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                          <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                          <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                        </svg>
                      </button>
                    }
                    <button
                      (click)="deleteCourse(course.id)"
                      class="action-icon-btn delete"
                      title="Supprimer">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                      </svg>
                    </button>
                  </div>
                </div>
              }
            } @else {
              <div class="empty-state modern">
                <div class="empty-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                  </svg>
                </div>
                <h2>Aucun cours trouv√©</h2>
                <p>Essayez une autre recherche ou tri</p>
              </div>
            }
          </div>
        } @else {
          <div class="empty-state">
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
            </svg>
            <h2>Aucun cours cr√©√©</h2>
            <p>Commencez par cr√©er votre premier cours</p>
          </div>
        }
      </div>

      <!-- Course Preview Modal -->
      @if (showCoursePreview && previewCourse) {
        <div class="modal-overlay" (click)="closePreview()">
          <div class="modal-content course-preview-modal" (click)="$event.stopPropagation()">
            <div class="modal-header">
              <h2>Aper√ßu du Cours</h2>
              <button class="modal-close" (click)="closePreview()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </div>
            <div class="modal-body">
              <div class="preview-item">
                <strong>Titre:</strong> {{ previewCourse.title }}
              </div>
              <div class="preview-item">
                <strong>Cat√©gorie:</strong> {{ getCategoryLabel(previewCourse.category) }}
              </div>
              <div class="preview-item">
                <strong>Description:</strong> {{ previewCourse.description }}
              </div>
              <div class="preview-item">
                <strong>Modules:</strong> {{ getCourseStats(previewCourse).modules }}
              </div>
              <div class="preview-item">
                <strong>Dur√©e totale:</strong> {{ getCourseStats(previewCourse).totalDuration }}
              </div>
              <div class="preview-item">
                <strong>Cr√©√© le:</strong> {{ previewCourse.createdAt | date:'medium' }}
              </div>
              @if (previewCourse.updatedAt) {
                <div class="preview-item">
                  <strong>Modifi√© le:</strong> {{ previewCourse.updatedAt | date:'medium' }}
                </div>
              }
              <div class="preview-item">
                <strong>Statut d'acc√®s:</strong>
                @if (previewCourse.accessKey) {
                  <span class="access-badge active">‚úì D√©bloqu√© ({{ previewCourse.accessKey }})</span>
                } @else {
                  <span class="access-badge inactive">‚úó Verrouill√©</span>
                }
              </div>
              @if (previewCourse.contents.length > 0) {
                <div class="preview-item">
                  <strong>Contenu:</strong>
                  <ul class="content-list">
                    @for (content of previewCourse.contents; track content.id) {
                      <li>
                        <span class="content-title">{{ content.title }}</span>
                        @if (content.duration) {
                          <span class="content-duration">{{ content.duration }}</span>
                        }
                      </li>
                    }
                  </ul>
                </div>
              }
            </div>
            <div class="modal-footer">
              <button (click)="closePreview()" class="btn btn-secondary">Fermer</button>
            </div>
          </div>
        </div>
      }
    }

    <!-- Tab: Cr√©er un Cours -->
    @if (activeTab === 'create') {
      <div class="tab-content">
        <div class="content-header">
          <h1>Cr√©er un Nouveau Cours</h1>
          <p>Remplissez le formulaire pour cr√©er un cours de formation</p>
        </div>

        <div class="form-section card">
          <form (ngSubmit)="createCourse()" class="admin-form">
            <div class="form-group">
              <label for="course-title">Titre du Cours *</label>
              <input
                type="text"
                id="course-title"
                [(ngModel)]="newCourse.title"
                name="title"
                placeholder="Ex: Automatisme Avanc√©"
                required
              />
            </div>

            <div class="form-group">
              <label for="course-category">Cat√©gorie *</label>
              <select
                id="course-category"
                [(ngModel)]="newCourse.category"
                name="category"
                required
              >
                @for (cat of categoryOptions; track cat.value) {
                  <option [value]="cat.value">{{ cat.label }}</option>
                }
              </select>
            </div>

            <div class="form-group">
              <label for="course-description">Description *</label>
              <textarea
                id="course-description"
                [(ngModel)]="newCourse.description"
                name="description"
                placeholder="D√©crivez le contenu et les objectifs du cours"
                rows="4"
                required
              ></textarea>
            </div>

            <button type="submit" class="btn btn-primary btn-lg">
              Cr√©er le Cours
            </button>
          </form>
        </div>
      </div>
    }

    <!-- Tab: G√©rer le Contenu -->
    @if (activeTab === 'manage') {
      <div class="tab-content">
        <div class="content-header">
          <h1>G√©rer le Contenu des Cours</h1>
          <p>Ajoutez des vid√©os et des PDF √† vos cours</p>
        </div>

        @if (courses.length > 0) {
          <div class="manage-section">
            <!-- Course Selection -->
            <div class="course-selection card">
              <h2>S√©lectionner un Cours</h2>
              <div class="courses-buttons">
                @for (course of courses; track course.id) {
                  <button
                    (click)="selectCourse(course)"
                    [class.active]="selectedCourse?.id === course.id"
                    class="course-btn">
                    {{ course.title }}
                    <span class="category-badge">{{ course.category }}</span>
                  </button>
                }
              </div>
            </div>

            @if (selectedCourse) {
              <!-- Content Form -->
              <div class="content-form card">
                <h2>Ajouter du Contenu √†: <strong>{{ selectedCourse.title }}</strong></h2>

                <form (ngSubmit)="addContentToCourse()" class="admin-form">
                  <div class="form-group">
                    <label for="content-title">Titre du Module *</label>
                    <input
                      type="text"
                      id="content-title"
                      [(ngModel)]="newContent.title"
                      name="contentTitle"
                      placeholder="Ex: Introduction √† l'Automatisme"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="content-description">Description du Module *</label>
                    <textarea
                      id="content-description"
                      [(ngModel)]="newContent.description"
                      name="contentDescription"
                      placeholder="D√©crivez le contenu du module"
                      rows="3"
                      required
                    ></textarea>
                  </div>

                  <div class="form-group">
                    <label for="content-duration">Dur√©e (ex: 30 min)</label>
                    <input
                      type="text"
                      id="content-duration"
                      [(ngModel)]="newContent.duration"
                      name="duration"
                      placeholder="Dur√©e du module"
                    />
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label for="video-upload">T√©l√©charger une Vid√©o</label>
                      <input
                        type="file"
                        id="video-upload"
                        accept="video/*"
                        (change)="onVideoSelected($event)"
                      />
                      @if (newContent.videoPreview) {
                        <div class="file-selected">
                          <span>‚úì {{ newContent.videoPreview }}</span>
                          <button type="button" (click)="removeVideoFile()" class="btn-remove">‚úï</button>
                        </div>
                      }
                    </div>

                    <div class="form-group">
                      <label for="pdf-upload">T√©l√©charger un PDF</label>
                      <input
                        type="file"
                        id="pdf-upload"
                        accept=".pdf"
                        (change)="onPdfSelected($event)"
                      />
                      @if (newContent.pdfPreview) {
                        <div class="file-selected">
                          <span>‚úì {{ newContent.pdfPreview }}</span>
                          <button type="button" (click)="removePdfFile()" class="btn-remove">‚úï</button>
                        </div>
                      }
                    </div>
                  </div>

                  <button type="submit" class="btn btn-primary btn-lg">
                    Ajouter le Contenu
                  </button>
                </form>
              </div>

              <!-- Course Contents -->
              @if (selectedCourse.contents.length > 0) {
                <div class="contents-list card">
                  <h2>Modules du Cours</h2>
                  <div class="contents-table">
                    @for (content of selectedCourse.contents; track content.id) {
                      <div class="content-item">
                        <div class="content-info">
                          <h4>{{ content.title }}</h4>
                          <p>{{ content.description }}</p>
                          <div class="content-meta">
                            @if (content.duration) {
                              <span class="meta-badge">‚è±Ô∏è {{ content.duration }}</span>
                            }
                            @if (content.videoUrl) {
                              <span class="meta-badge">üé• Vid√©o</span>
                            }
                            @if (content.pdfUrl) {
                              <span class="meta-badge">üìÑ PDF</span>
                            }
                          </div>
                        </div>
                        <button
                          (click)="deleteContent(selectedCourse!.id, content.id)"
                          class="btn btn-danger btn-small">
                          Supprimer
                        </button>
                      </div>
                    }
                  </div>
                </div>
              } @else {
                <div class="no-contents">
                  <p>Aucun contenu pour ce cours. Ajoutez du contenu ci-dessus.</p>
                </div>
              }
            } @else {
              <div class="empty-state">
                <p>S√©lectionnez un cours pour g√©rer son contenu</p>
              </div>
            }
          </div>
        } @else {
          <div class="empty-state">
            <p>Cr√©ez d'abord un cours avant d'ajouter du contenu</p>
          </div>
        }
      </div>
    }

    <!-- Placeholder for other tabs -->
    @if (activeTab === 'create') {
      <div class="content-body">
        <h2>Cr√©ation de cours - Interface moderne √† d√©velopper</h2>
      </div>
    }

    @if (activeTab === 'manage') {
      <div class="content-body">
        <h2>Gestion de contenu - Interface moderne √† d√©velopper</h2>
      </div>
    }

  </main>
</div>
