<div class="formations-wrapper">
  <!-- Hero Section -->
  <section class="hero-small">
    <div class="container">
      <h1>Nos Formations Certifiantes</h1>
      <p>Des formations adaptées à votre niveau et vos besoins professionnels</p>
    </div>
  </section>

  <!-- Filters -->
  <section class="section filters-section">
    <div class="container">
      <h2 class="text-center">Filtrer par catégorie</h2>
      <div class="filter-buttons">
        @for (category of categoryOptions; track category.value) {
          <button
            class="filter-btn"
            [class.active]="selectedCategory === category.value"
            (click)="filterByCategory(category.value)">
            <span class="filter-icon">
              @switch(category.icon) {
                @case('all') {
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg>
                }
                @case('thermo') {
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>
                  </svg>
                }
                @case('automatisme') {
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="1"></circle>
                    <path d="M12 1v6m6-1h-5M6 8H1m17 6h5M8 12H3m13 0h5M6 20h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2z"></path>
                  </svg>
                }
                @case('process') {
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"></path>
                  </svg>
                }
              }
            </span>
            {{ category.label }}
          </button>
        }
      </div>
    </div>
  </section>

  <!-- Formations Grid -->
  <section class="section formations-list-section">
    <div class="container">
      @if (getFilteredCourses().length > 0) {
        <div class="formations-list">
          @for (course of getFilteredCourses(); track course.id) {
            <div class="formation-item card">
              <div class="formation-item-header">
                <div class="formation-icon">
                  @switch(getCategoryIcon(course.category)) {
                    @case('automation') {
                      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="1"></circle>
                        <path d="M12 1v6m6-1h-5M6 8H1m17 6h5M8 12H3m13 0h5M6 20h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2z"></path>
                      </svg>
                    }
                    @case('thermo') {
                      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>
                      </svg>
                    }
                    @case('process') {
                      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"></path>
                      </svg>
                    }
                    @default {
                      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                      </svg>
                    }
                  }
                </div>
                <div class="formation-item-meta">
                  <span class="level" [class]="'level-' + getLevel(course).toLowerCase().replace(' ', '-')">
                    {{ getLevel(course) }}
                  </span>
                  <span class="duration">{{ formatDuration(course.total_duration) }}</span>
                </div>
              </div>

              <h3>{{ course.title }}</h3>
              <p class="description">{{ course.description }}</p>

              <div class="course-info">
                <div class="info-section">
                  <strong>Catégorie :</strong>
                  <span class="category-tag" [class]="course.category">
                    {{ getCategoryLabel(course.category) }}
                  </span>
                </div>
                @if (course.objectives) {
                  <div class="info-section">
                    <strong>Objectifs :</strong>
                    <p class="objectives">{{ course.objectives }}</p>
                  </div>
                }
                <div class="info-section">
                  <strong>Modules :</strong>
                  <span class="modules-count">{{ course.contents.length }} module(s)</span>
                </div>
              </div>

              <div class="formation-footer">
                <span class="price">
                  @if (course.access_key) {
                    <span class="access-status available">✓ Disponible</span>
                  } @else {
                    <span class="access-status coming-soon">Bientôt disponible</span>
                  }
                </span>
                @if (course.access_key) {
                  <a href="/formations/{{ course.id }}" class="btn btn-primary btn-sm">Accéder au cours</a>
                } @else {
                  <a href="javascript:void(0)" class="btn btn-secondary btn-sm">S'inscrire à la liste d'attente</a>
                }
              </div>
            </div>
          }
        </div>
      } @else {
        <div class="empty-state">
          <div class="empty-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </div>
          <h2>Aucune formation trouvée</h2>
          <p>
            @if (selectedCategory) {
              Aucune formation disponible dans la catégorie sélectionnée.
            } @else {
              Aucune formation n'est encore disponible.
            }
          </p>
        </div>
      }
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section cta-section">
    <div class="container">
      <div class="cta-content text-center">
        <h2>Rejoignez Notre Plateforme E-Learning</h2>
        <p>Accédez à nos formations en ligne et développez vos compétences à votre rythme avec du contenu multimédia de qualité.</p>
        <div class="cta-buttons">
          <a href="/admin" class="btn btn-primary btn-lg">Espace Administrateur</a>
          <a href="/login" class="btn btn-secondary btn-lg">Connexion Étudiant</a>
        </div>
      </div>
    </div>
  </section>
</div>
